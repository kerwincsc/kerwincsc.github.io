NC-NETCAT
======================================================================

网络工具中的瑞士军刀

1. telnet/获取banner信息
------------------------------------------------------------

作为客户端使用

::
   nv -vn <host_ip> <port>
   nc -vn 1.1.1.1 110

2. 传输文本信息
------------------------------------------------------------

* 作为客户端使用 ::

  nc -nv <server_ip> <port>
  ls -l | nc -nv <server_ip> <port>

* 作为服务端使用 ::

  nc -l -p <port>

应用场景: **电子取证**
  #. 取证机器启动服务器监听 `nc -l -p 4444`
  #. 被取证端启动客户端， 将收集到的文本信息传输给取证机器
     ``ls -l | nc -nv 172.31.225.210 4444``





3. 传输文件/目录
------------------------------------------------------------

#. 传输文件

   两种应用场景: 文件的侦听端口和传输方向
   
   A: nc -lp 333 > 1.mp4
   B: nc -nv host_A_ip < 1.mp4 -q 1
   
   A: nc -lp 333 < 1.mp4 -q 1
   B: nc -nv host_A_ip 333 > 1.mp4
   
   注: ``-q 1`` 传输完成 1 秒后, 关闭连接

#. 传输目录(结合其它命令)

   A: tar -cvf - music/ | nc -lp 333 -q 1
   B: nc -nv 1.1.1.1 333 | tar -xvf -

#. 加密传文件

   A: nc -lp 333 | mcrypt --flush -Fbqd -a rijndael-256 -m ecb > 1.mp4
   B: mcrpyt --flush -Fbq -a rijndael-256 -m ecb < a.mp4 | nc -nv 1.1.1.1 333 -q 1

4. 流媒体服务器
------------------------------------------------------------

流媒体服务端 A: cat 1.mp4 | nc -lp 333
流媒体客户端 B: nc -nv 1.1.1.1 333 | mplayer -vo x11 -cache 3000 -

5. 端口扫描
------------------------------------------------------------

#. nc -vnz 1.1.1.1 1-65535
#. nc -vnzu 1.1.1.1 1-1024
   默认以 TCP 进行探测, -u 是以 UDP 进行探测(不太准确)

6. 远程克隆硬盘
------------------------------------------------------------

远程电子取证, 可以将目标服务器硬盘远程复制, 或者内存

#. A: nc -lp 333 | dd of=/dev/sda
#. B: dd if=/dev/sda | nc -nv 1.1.1.1 333 -q 1

加密传输文件
远程控制/木马
加密所有流量


侦听模式/传输模式

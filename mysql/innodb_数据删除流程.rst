=====================
 InnoDB 数据删除流程
=====================

标记为删除及复用
==============

如果我们要删除某个记录, InnoDB 引擎只会把这个记录 **标记为删除**.
如果之后要再插入一个记录时, 可能会复用这个位置.
但是 **磁盘文件的大小并不会缩小**.

因为, InnoDB 的数据是 **按页存储**的, 所以如果删掉了一个数据页上的所有记录,
**整个数据页就可以被复用** 了.

进一步地, 如果用 delete 命令把整个表的数据删除, 所有的数据页都会被标记可复用.
但是磁盘上, 文件不会变小.

复用条件
--------

**数据页的利用和记录的复用是不同的**.

记录的复用, 只限于符合范围条件的数据. 如果插入记录的 ID 在被删除记录所在页的 ID
范围内, 就可以直接复用这个空间; 如果不在页的 ID 范围内, 就不可以复用.

而当整个页从 B+ 树里面摘掉以后, 可以复用到任何位置.

页合并
------

如果相邻的两个数据页利用率都很小, 系统就会把这两个页上的数据合并到其中一个页上,
另一个数据页就被标记为可复用.


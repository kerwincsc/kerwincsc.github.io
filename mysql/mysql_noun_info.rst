==========================
 Mysql 名词参数及组件解释
==========================

名词解释
========

- 两阶段提交

  为什么必须有 **两阶段提交** 呢? 这是为了让两份日志 (redo log 和 bin log)
  之间的逻辑一致

- 事务

  事务就是要保证一组数据库操作，要么全部成功，要么全部失败

- 隔离级别

  1. 读未提交 read uncommitted

     一个事务还没提交时, 它做的变更就能被别的事务看到

  2. 读提交 read committed

     一个事务提交之后，它做的变更才会被其他事务看到

  3. 可重复读 repeatable read

     一个事务执行过程中看到的数据,
     总是跟这个事务在启动时看到的数据是一致的.

     当然在可重复读隔离级别下, 未提交变更对其他事务也是不可见的.

  4. 串行化 serializable

     对于同一行记录, "写" 会加 "写锁", "读" 会加 "读锁".
     当出现读写锁冲突的时候,后访问的事务必须等前一个事务执行完成,
     才能继续执行.

  - 为了解决当数据库上有多个事务同时执行的时候,
    可能出现的脏读 (dirty read), 不可重复读 (non-repeatable read),
    幻读 (phantom read) 问题.

- 搭建一些备库来增加系统的读能力

  常见的做法是用 **全量备份** 加上应用 **binlog** 来实现

- redo log

  用于保证crash-safe能力

参数说明
========
  
- ``innodb_flush_log_at_trx_commit``

  此参数为 1 时, 表示每次事务的 redo log 直接持久化到磁盘.

  这个参数建议设置成 1, 这样可以保证 MySQL 异常重启之后数据不丢失

- ``sync_binlog``

  设置成 1 时, 表示每次事务的 binlog 持久化到磁盘.

  这个参数也建议设置成 1, 可以保证 MySQL 异常重启之后 binlog 不丢失
